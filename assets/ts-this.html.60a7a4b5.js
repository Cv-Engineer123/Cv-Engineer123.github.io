import{_ as p,r as o,o as e,c,a as n,b as i,d as a,e as s}from"./app.6d0bab28.js";const l={},u=a(`<h1 id="typescript\u4E2Dfunction\u7684this\u7C7B\u578B\u58F0\u660E" tabindex="-1"><a class="header-anchor" href="#typescript\u4E2Dfunction\u7684this\u7C7B\u578B\u58F0\u660E" aria-hidden="true">#</a> Typescript\u4E2Dfunction\u7684this\u7C7B\u578B\u58F0\u660E</h1><p>\u5728\u5F00\u53D1\u4E2D\uFF0C\u53EF\u80FD\u7ECF\u5E38\u4F1A\u7528\u5230\u7C7B\u4F3C\u4E0E\u9632\u6296\uFF0C\u8282\u6D41\u4E4B\u7C7B\u7684\u4F9D\u9760\u95ED\u5305\u6765\u5B9E\u73B0\u7684\u4E00\u4E9B\u4EA4\u4E92\u4E0A\u7684\u4F18\u5316\uFF0C\u800C\u5728Vue\u9879\u76EE\u4E2D\uFF08\u4F8B\u5982Vue2\uFF09\uFF0Cmethods\u3001data\u4E4B\u7C7B\u7684\u90FD\u662F\u4F9D\u9760this\u6765\u8C03\u7528\uFF0C\u5728\u6B63\u5E38\u7684js\u6587\u4EF6\u5185\u5B9A\u4E49\u9632\u6296/\u8282\u6D41\u65F6\u662F\u8FD9\u4E48\u5B9A\u4E49\u7684</p><div class="language-javascript ext-js line-numbers-mode"><pre class="language-javascript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u800C\u5728ts\u6587\u4EF6\u5185\uFF0C\u4E3A\u51FD\u6570\u5B9A\u4E49\u4E86\u7C7B\u578B\u4E4B\u540E\u662F\u8FD9\u6837\u7684</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span>func<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> delay<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer<span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>Timeout <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u6309\u7167\u8FD9\u6837\u7684\u65B9\u6CD5\u6765\u5B9A\u4E49\u7C7B\u578B\uFF0Cts\u4F1A\u62A5\u9519 =&gt; <strong>this</strong>\u6CA1\u6709\u7C7B\u578B\u6CE8\u91CA\u5E76\u4E14\u5177\u6709\u9690\u5F0F\u7C7B\u578B\uFF0C\u6839\u636Ets\u5B98\u65B9\u6587\u6863\u8BF4\u660E</p>`,6),r=s("\u9ED8\u8BA4\u60C5\u51B5\u4E0B\uFF0C"),k=n("strong",null,"this",-1),d=s("\u51FD\u6570\u5185\u90E8\u7684\u7C7B\u578B\u662F"),v=n("strong",null,"any",-1),m=s(". \u4ECE TypeScript 2.0 \u5F00\u59CB\uFF0C\u60A8\u53EF\u4EE5\u63D0\u4F9B\u663E\u5F0F"),h=n("strong",null,"this",-1),b=s("\u53C2\u6570\u3002 "),y=n("strong",null,"this",-1),_=s("\u53C2\u6570\u662F\u51FD\u6570\u53C2\u6570\u5217\u8868\u4E2D\u6700\u5148\u51FA\u73B0\u7684\u5047\u53C2\u6570\u3002"),f={href:"https://www.typescriptlang.org/docs/handbook/release-notes/typescript-2-0.html#specifying-the-type-of-this-for-functions",target:"_blank",rel:"noopener noreferrer"},w=s("\u6307\u5B9A"),g=n("strong",null,"this",-1),x=s("\u51FD\u6570\u7684\u7C7B\u578B"),T=s("\u3002"),N=a(`<p>\u56E0\u6B64\u9700\u8981\u5728return function\u8FD9\u4E00\u5757\u6DFB\u52A0this\u7684\u7C7B\u578B</p><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">throttle</span><span class="token punctuation">(</span>func<span class="token operator">:</span> <span class="token builtin">Function</span><span class="token punctuation">,</span> delay<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer<span class="token operator">:</span> NodeJS<span class="token punctuation">.</span>Timeout <span class="token operator">|</span> <span class="token keyword">null</span> <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token keyword">this</span><span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">,</span> <span class="token operator">...</span>args<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
      timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        timer <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>\u8FD9\u91CC\u5B9A\u4E49\u7684this\u53EA\u662F\u4E00\u4E2A\u5047\u7684\u51FD\u6570\u53C2\u6570\uFF0C\u4E0D\u4F1A\u53C2\u4E0E\u51FD\u6570\u53C2\u6570\u6210\u5458</p>`,3);function V(j,S){const t=o("ExternalLinkIcon");return e(),c("div",null,[u,n("blockquote",null,[n("p",null,[r,k,d,v,m,h,b,y,_,n("a",f,[w,g,x,i(t)]),T])]),N])}var E=p(l,[["render",V],["__file","ts-this.html.vue"]]);export{E as default};
